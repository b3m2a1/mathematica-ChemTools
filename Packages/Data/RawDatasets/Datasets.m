(* ::Package:: *)

(************************************************************************)
(* This file was generated automatically by the Mathematica front end.  *)
(* It contains Initialization cells from a Notebook file, which         *)
(* typically will have the same name as this file except ending in      *)
(* ".nb" instead of ".m".                                               *)
(*                                                                      *)
(* This file is intended to be loaded into the Mathematica kernel using *)
(* the package loading commands Get or Needs.  Doing so is equivalent   *)
(* to using the Evaluate Initialization Cells menu command in the front *)
(* end.                                                                 *)
(*                                                                      *)
(* DO NOT EDIT THIS FILE.  This entire file is regenerated              *)
(* automatically each time the parent Notebook file is saved in the     *)
(* Mathematica front end.  Any changes you make to this file will be    *)
(* overwritten.                                                         *)
(************************************************************************)



(* ::Text:: *)
(*A collection of datasets used as ChemData sources*)



$ChemCustomAtoms::usage="";
$ChemIsotopicMasses::usage="";
$ChemAtomColors::usage="";
$ChemElements::usage="";
$ChemSpaceGroups::usage="";
$ChemBondDistances::usage="";
$ChemElementValences::usage="";
$ChemCharacterTables::usage="";
$ChemCorrelationTables::usage="";
$ChemTanabeSuganoData::usage="";
$ChemMMMFF94AtomTypes::usage="";
$ChemMMMFF94BondData::usage="";
$ChemMMFF94BondAngleData::usage="";
$ChemMMFF94StretchBendData::usage="";
$ChemMMFF94TorsionAngleData::usage="";


Begin["`Private`"];


ChemDataLookup::nolod="Couldn't load resource ``, got ``";


$ChemDatasetsCachePermanent=False;


ChemDatasetPacletFile[name_]:=
	PackageFilePath["Resources", "Datasets", name<>".wl"];
ChemDatasetTempFile[name_]:=
	FileNameJoin[
		{
			$TemporaryDirectory, 
			"ChemTools_Datasets",
			name<>".wl"
			}
		];
ChemDatasetAppDataFile[name_]:=
	FileNameJoin[
		{$UserBaseDirectory, "ApplicationData", "ChemTools", 
			"Datasets", name<>".wl"
			}
		];
ChemDatasetWebResourceFile[name_]:=
	First@CloudObject@
		URLBuild[
			<|
				"Scheme"->"user", 
				"Path"->{"b3m2a1.datasets", "ChemTools", name<>".wl"}
				|>
			];


ChemDatasetDownload[name_, "File"]:=
	With[
		{
			target=
				If[$ChemDatasetsCachePermanent,
					ChemDatasetAppDataFile[name], 
					ChemDatasetTempFile[name]
					],
			source=ChemDatasetWebResourceFile[name]
			},
		Monitor[
			If[URLDownload[source, target, "StatusCode"]<400,
				target,
				Failure["ChemDatasetDownload", 
					"MessageTemplate"->
						TemplateApply["Couldn't download `` from ``",
						 {name, source}
						 ]
					]
				],
			Internal`LoadingPanel@
				TemplateApply["Downloading dataset `` from ``", {name, source}]
			]
		]


ChemDatasetLoad[name_, mode:"File"]:=
	Replace[
		SelectFirst[
			{
				ChemDatasetPacletFile[name],
				ChemDatasetAppDataFile[name],
				ChemDatasetTempFile[name]
				},
			FileExistsQ,
			ChemDatasetDownload[name, mode]
			],
	{
		res:(_String|_File)?FileExistsQ:>
			Import[res],
		fail_:>
			(
				Message[ChemDataLookup::nolod, name, fail];
				SetDelayed[
					ChemDatasetLoad[name, mode], 
					Message[ChemDataLookup::nolod, name, fail]
					];
				fail
				)
		}
	];
ChemDatasetLoad[name_, Optional[Automatic, Automatic]]:=
	ChemDatasetLoad[name, "File"]


ChemDatasetRegister[base:Hold[_Symbol]|Automatic:Automatic, name_, pat_]:=
	Replace[
		If[base===Automatic,
			ToExpression["$"<>name, StandardForm, Hold],
			base
			],
		Hold[sym_]:>
			If[!MatchQ[OwnValues[sym],{_:>pat}],
				sym:=
					sym=ChemDatasetLoad[name]
				]
		];


(* ::Text:: *)
(*A set of non-standard atoms used internally sometimes*)



ChemDatasetRegister["ChemCustomAtoms", _Association?AssociationQ]


ChemDatasetRegister["ChemIsotopicMasses", _Association?AssociationQ]


ChemDatasetRegister["ChemAtomColors", _Association?AssociationQ]


ChemDatasetRegister["ChemElements", _Association?AssociationQ]


ChemDatasetRegister["ChemSpaceGroups", _Association?AssociationQ]


ChemDatasetRegister["ChemBondDistances", _Association?AssociationQ]


ChemDatasetRegister["ChemElementValences", _Association?AssociationQ]


ChemDatasetRegister["ChemCharacterTables", _Association?AssociationQ]


ChemDatasetRegister["ChemCorrelationTables", _Association?AssociationQ]


ChemDatasetRegister[
	$ChemTanabeSuganoData, 
	"ChemTanabeSuganoDiagrams", 
	_Association?AssociationQ
	]


ChemDatasetRegister[
	$ChemMMFF94AtomTypes, 
	"MMFF94AtomTypes", 
	_Association?AssociationQ
	]


ChemDatasetRegister[
	$ChemMMMFF94BondData, 
	"MMFF94BondData", 
	_Association?AssociationQ
	]


ChemDatasetRegister[
	$ChemMMFF94BondAngleData, 
	"MMFF94BondAngleData", 
	_Association?AssociationQ
	]


ChemDatasetRegister[
	$ChemMMFF94StretchBendData, 
	"MMFF94StretchBendData", 
	_Association?AssociationQ
	]


ChemDatasetRegister[
	$ChemMMFF94TorsionAngleData, 
	"MMFF94TorsionAngleData", 
	_Association?AssociationQ
	]


End[];



